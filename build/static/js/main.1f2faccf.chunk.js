(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(26),o=a.n(s),c=a(8);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(22),u=(a(69),a(70),a(13)),i=a(14),p=a(16),m=a(15),f=a(17),h=a(11),d=a(20),E=a(58),g=a(113),b=a(114),y=a(115),O=a(111),v=a(23),k=a(112),j=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,null,r.a.createElement(k.a,{tag:v.b,to:"/login",exact:!0},"\u0412\u0445\u043e\u0434 \u0434\u043b\u044f \u0430\u0434\u043c\u0438\u043d\u0430")))},C=function(e){var t=e.user;return r.a.createElement(g.a,{color:"light",light:!0,expand:"md"},r.a.createElement(b.a,{tag:v.b,to:"/"},"Tasks"),r.a.createElement(y.a,{className:"ml-auto",navbar:!0},t?r.a.createElement(O.a,null,"Hello, admin"):r.a.createElement(j,null)))},S=a(55),N=a.n(S).a.create({baseURL:"https://uxcandy.com/~shapoval/test-task-backend/v2/"}),w=a(7),_=function(e){return{type:"FETCH_SUCCESS",data:e}},x=function(e){return{type:"FETCH_FAILURE",error:e}},F=a(116),A=(a(107),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Task"},r.a.createElement("p",null," ",r.a.createElement("span",{className:"Bold"},"\u0410\u0432\u0442\u043e\u0440: "),this.props.author),r.a.createElement("p",null," ",r.a.createElement("span",{className:"Bold"},"\u041f\u043e\u0447\u0442\u0430: "),this.props.email),r.a.createElement("p",{className:"Text"}," ",r.a.createElement("span",{className:"Bold"},"\u0417\u0430\u0434\u0430\u0447\u0430: "),this.props.text),r.a.createElement("p",null," ",r.a.createElement("span",{className:"Bold"},"Status: "),this.props.status),this.props.children)}}]),t}(n.Component)),U=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).editPage=function(e){a.props.history.push("edit/"+e)},a}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTasks()}},{key:"render",value:function(){var e=this,t=function(){};return t=this.props.user?function(t){return r.a.createElement(n.Fragment,null,r.a.createElement(F.a,{onClick:function(){return e.editPage(t)}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))}:function(){},r.a.createElement(n.Fragment,null,r.a.createElement(v.a,{style:{fontSize:36},to:"/new"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"),r.a.createElement("h3",null,"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e "),r.a.createElement(F.a,{className:"mx-2",onClick:function(){return e.props.fetchTasks({sort_field:"username"})}},"\u041f\u043e \u0438\u043c\u0435\u043d\u0438"),r.a.createElement(F.a,{className:"mx-2",onClick:function(){return e.props.fetchTasks({sort_field:"email"})}},"\u041f\u043e \u043f\u043e\u0447\u0442\u0435"),r.a.createElement(F.a,{className:"mx-2",onClick:function(){return e.props.fetchTasks({sort_field:"status"})}},"\u041f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0443"),this.props.tasks.map(function(e){return r.a.createElement(A,{key:e.id,author:e.username,email:e.email,text:e.text,status:10!==e.status?"\u041d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430":"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430"},t(e.id))}),r.a.createElement(F.a,{className:"mx-2",onClick:function(){return e.props.fetchTasks({page:1===e.props.page?0:e.props.page-1})}},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement(F.a,{className:"mx-2",onClick:function(){return e.props.fetchTasks({page:e.props.page+1})}},"\u0412\u043f\u0435\u0440\u0435\u0434"))}}]),t}(n.Component),T=Object(c.c)(function(e){return{tasks:e.tasks.tasks,page:e.tasks.page,user:e.users.user}},function(e){return{fetchTasks:function(t){return e(function(e){return function(t,a){var n=a();return e&&"sort_field"in e?(e=e.sort_field,N.get("",{params:{developer:"Aisalkyn",sort_field:e,page:n.tasks.page}}).then(function(a){t(_(a.data.message.tasks)),t({type:"SAVE_SORT_FIELD",data:e})},function(e){return t(x(e))})):e&&"page"in e?(e=e.page,N.get("",{params:{developer:"Aisalkyn",sort_field:n.tasks.sort_field,page:e}}).then(function(a){t(_(a.data.message.tasks)),t({type:"SAVE_PAGE_NUMBER",data:e})},function(e){return t(x(e))})):N.get("",{params:{developer:"Aisalkyn"}}).then(function(e){console.log(e.data.message),t(_(e.data.message.tasks))},function(e){return t(x(e))})}}(t))}}})(U),H=a(21),L=a(122),I=a(117),R=a(119),D=a(56),M=a(118),B=a(120),G=a(121),P=function(e){var t=e.propertyName,a=e.title,n=e.error,s=e.children,o=Object(D.a)(e,["propertyName","title","error","children"]);return r.a.createElement(I.a,{row:!0},r.a.createElement(M.a,{sm:2,for:t},a),r.a.createElement(R.a,{sm:10},r.a.createElement(B.a,Object.assign({id:t,name:t,invalid:!!n},o),s),n&&r.a.createElement(G.a,null,n)))},V=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",text:"",email:""},a.inputChangeHandler=function(e){a.setState(Object(H.a)({},e.target.name,e.target.value))},a.submitFormHandler=function(e){e.preventDefault();var t=new FormData;Object.keys(a.state).forEach(function(e){t.append(e,a.state[e])}),a.props.sendTask(t)},a}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(L.a,{onSubmit:this.submitFormHandler},r.a.createElement("h2",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443"),r.a.createElement(P,{propertyName:"username",title:"\u0418\u043c\u044f",type:"text",value:this.state.username,onChange:this.inputChangeHandler,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f"}),r.a.createElement(P,{propertyName:"email",title:"Email",type:"email",value:this.state.email,onChange:this.inputChangeHandler,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0443\u044e \u043f\u043e\u0447\u0442\u0443"}),r.a.createElement(P,{propertyName:"text",title:"\u0417\u0430\u0434\u0430\u0447\u0430",type:"textarea",value:this.state.text,onChange:this.inputChangeHandler,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438"}),r.a.createElement(I.a,{row:!0},r.a.createElement(R.a,{sm:{offset:2,size:10}}),r.a.createElement(F.a,{className:"ml-3",type:"submit",color:"primary"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))))}}]),t}(n.Component),z=Object(c.c)(function(e){return{error:e.tasks.error,user:e.users.user}},function(e){return{sendTask:function(t){return e((a=t,function(e){return N.post("create?developer=Aisalkyn",a).then(function(){e({type:"SEND_SUCCESS"}),d.NotificationManager.success("\u0421\u043e\u0437\u0434\u0430\u043d\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),e(Object(w.d)("/"))},function(t){e(function(e){return{type:"SEND_FAILURE",error:e}}(t)),d.NotificationManager.error("\u041e\u0448\u0438\u0431\u043a\u0430")})}));var a}}})(V),J=function(e){return{type:"LOGIN_USER_FAILURE",error:e}},W=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.inputChangeHandler=function(e){a.setState(Object(H.a)({},e.target.name,e.target.value))},a.submitFormHandler=function(e){e.preventDefault();var t=new FormData;Object.keys(a.state).forEach(function(e){t.append(e,a.state[e])}),a.props.loginUser(t)},a}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"mb-4"},"Login"),r.a.createElement(L.a,{onSubmit:this.submitFormHandler},r.a.createElement(P,{propertyName:"username",title:"Username",type:"text",value:this.state.username,onChange:this.inputChangeHandler,placeholder:"Enter username you registered with",autoComplete:"current-username"}),r.a.createElement(P,{propertyName:"password",title:"Password",type:"password",value:this.state.password,onChange:this.inputChangeHandler,placeholder:"Enter your password",autoComplete:"current-password"}),r.a.createElement(I.a,{row:!0},r.a.createElement(R.a,{sm:{offset:2,size:10}}),r.a.createElement(F.a,{className:"ml-3",type:"submit",color:"primary"},"Login"))))}}]),t}(n.Component),X=Object(c.c)(function(e){return{error:e.users.loginError}},function(e){return{loginUser:function(t){return e(function(e){return function(t){return N.post("/login?developer=Aisalkyn",e).then(function(e){t({type:"LOGIN_USER_SUCCESS",user:e.data}),d.NotificationManager.success("Logged in successfully"),t(Object(w.d)("/"))},function(e){e.response&&e.response.data?t(J(e.response.data.error)):t(J({global:"No connection"}))})}}(t))}}})(W),$=a(35),q=a.n($),K=a(57),Q=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={status:"",text:"",token:""},a.inputChangeHandler=function(e){a.setState(Object(H.a)({},e.target.name,e.target.value))},a.submitFormHandler=function(){var e=Object(K.a)(q.a.mark(function e(t){var n,r;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.setState({token:a.props.user.message.token});case 3:n=new FormData,Object.keys(a.state).forEach(function(e){n.append(e,a.state[e])}),r=a.props.match.params.id,a.props.editTask(n,r);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(L.a,{onSubmit:this.submitFormHandler},r.a.createElement("h2",null,"Add new artist"),r.a.createElement(P,{propertyName:"text",title:"text",type:"text",value:this.state.text,onChange:this.inputChangeHandler,placeholder:"Enter text"}),r.a.createElement(P,{propertyName:"status",title:"status",type:"number",value:this.state.status,onChange:this.inputChangeHandler,placeholder:"Enter status"}),r.a.createElement(I.a,{row:!0},r.a.createElement(R.a,{sm:{offset:2,size:10}}),r.a.createElement(F.a,{className:"ml-3",type:"submit",color:"primary"},"Create"))))}}]),t}(n.Component),Y=Object(c.c)(function(e){return{error:e.tasks.error,user:e.users.user}},function(e){return{editTask:function(t,a){return e(function(e,t){return function(a){return N.post("/edit/"+t+"?developer=Aisalkyn",e).then(function(){a({type:"SUCCESS"}),d.NotificationManager.success("\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e"),a(Object(w.d)("/"))},function(e){a(function(e){return{type:"FAILURE",error:e}}(e)),d.NotificationManager.error("\u041e\u0448\u0438\u0431\u043a\u0430")})}}(t,a))}}})(Q),Z=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.NotificationContainer,null),r.a.createElement("header",null,r.a.createElement(C,{user:this.props.user})),r.a.createElement(E.a,{className:"mt-5"},r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/",exact:!0,component:T}),r.a.createElement(h.a,{path:"/new",exact:!0,component:z}),r.a.createElement(h.a,{path:"/login",exact:!0,component:X}),r.a.createElement(h.a,{path:"/edit/:id",exact:!0,component:Y}))))}}]),t}(n.Component),ee=Object(h.f)(Object(c.c)(function(e){return{user:e.users.user}})(Z)),te=(a(109),a(12)),ae=a(24),ne=a(19),re={tasks:[],page:1,error:null,sort_field:""},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SUCCESS":return Object(ne.a)({},e,{tasks:t.data});case"SAVE_SORT_FIELD":return Object(ne.a)({},e,{sort_field:t.data});case"SAVE_PAGE_NUMBER":return Object(ne.a)({},e,{page:t.data});case"SEND_FAILURE":case"FETCH_FAILURE":return Object(ne.a)({},e,{error:t.error});default:return e}},oe={user:null,loginError:null},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER_SUCCESS":return Object(ne.a)({},e,{user:t.user,loginError:null});case"LOGIN_USER_FAILURE":return Object(ne.a)({},e,{loginError:t.error});default:return e}},le={error:null},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FAILURE":return Object(ne.a)({},e,{error:t.error});default:return e}},ie=a(51),pe=a(59),me=Object(te.a)(),fe=Object(ae.c)({tasks:se,users:ce,admin:ue,router:Object(l.b)(me)}),he=[pe.a,Object(ie.a)(me)],de=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ae.d)(ae.a.apply(void 0,he)),Ee=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),ge=Object(ae.e)(fe,Ee,de);ge.subscribe(function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){console.log("Could not save state")}}({users:{user:ge.getState().users.user}})});var be=ge,ye=r.a.createElement(c.a,{store:be},r.a.createElement(l.a,{history:me},r.a.createElement(ee,null)));o.a.render(ye,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},60:function(e,t,a){e.exports=a(110)}},[[60,1,2]]]);
//# sourceMappingURL=main.1f2faccf.chunk.js.map